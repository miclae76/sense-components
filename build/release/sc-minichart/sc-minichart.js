/*global define*/
define(["angular","underscore","./wiUtils","./external/jquery-sparkline/jquery.sparkline.min"],function(angular,_,wiUtils){"use strict";return{name:"scMinichart",restrict:"AE",replace:!0,scope:!1,template:"<div></div>",link:function(scope,element,attrs){scope.$watch(function(){return angular.toJson([attrs.data,attrs.type,attrs.width,attrs.height,attrs.lineColor,attrs.fillColor,attrs.chartRangeMin,attrs.chartRangeMax,attrs.composite,attrs.enableTagOptions,attrs.tagOptionPrefix,attrs.tagValuesAttribute,attrs.disableHiddenCheck,attrs.defaultPixelsPerValue,attrs.spotColor,attrs.minSpotColor,attrs.maxSpotColor,attrs.spotRadius,attrs.valueSpots,attrs.highlightSpotColor,attrs.highlightLineColor,attrs.lineWidth,attrs.normalRangeMin,attrs.normalRangeMax,attrs.drawNormalOnTop,attrs.xvalues,attrs.chartRangeClip,attrs.chartRangeMinX,attrs.chartRangeMaxX,attrs.barColor,attrs.negBarColor,attrs.zeroColor,attrs.nullColor,attrs.barWidth,attrs.barSpacing,attrs.zeroAxis,attrs.colorMap,attrs.stackedBarColor,attrs.posBarColor,attrs.negBarColor,attrs.zeroBarColor,attrs.barWidth,attrs.barSpacing,attrs.colorMap,attrs.lineHeight,attrs.thresholdValue,attrs.thresholdColor,attrs.targetColor,attrs.targetWidth,attrs.performanceColor,attrs.performanceColor,attrs.sliceColors,attrs.offset,attrs.borderWidth,attrs.borderColor,attrs.raw,attrs.showOutliers,attrs.outlierIQR,attrs.boxLineColor,attrs.boxFillColor,attrs.whiskerColor,attrs.outlierLineColor,attrs.outlierFillColor,attrs.spotRadius,attrs.medianColor,attrs.target,attrs.targetColor,attrs.minValue,attrs.maxValue])},function(){render()});var render=function(){var data;attrs.data&&(data=attrs.data.split(",")),wiUtils.isBlank(attrs.type)&&(attrs.type="bar"),element.sparkline(data,{type:attrs.type,width:attrs.width,height:attrs.height,lineColor:attrs.lineColor,fillColor:attrs.fillColor,chartRangeMin:attrs.chartRangeMin,chartRangeMax:attrs.chartRangeMax,composite:attrs.composite,enableTagOptions:attrs.enableTagOptions,tagOptionPrefix:attrs.tagOptionPrefix,tagValuesAttribute:attrs.tagValuesAttribute,disableHiddenCheck:attrs.disableHiddenCheck,defaultPixelsPerValue:attrs.defaultPixelsPerValue,spotColor:attrs.spotColor,minSpotColor:attrs.minSpotColor,maxSpotColor:attrs.maxSpotColor,valueSpots:attrs.valueSpots,highlightSpotColor:attrs.highlightSpotColor,highlightLineColor:attrs.highlightLineColor,lineWidth:attrs.lineWidth,normalRangeMin:attrs.normalRangeMin,normalRangeMax:attrs.normalRangeMax,drawNormalOnTop:attrs.drawNormalOnTop,xvalues:attrs.xvalues,chartRangeClip:attrs.chartRangeClip,chartRangeMinX:attrs.chartRangeMinX,chartRangeMaxX:attrs.chartRangeMaxX,barColor:attrs.barColor,zeroColor:attrs.zeroColor,nullColor:attrs.nullColor,zeroAxis:attrs.zeroAxis,stackedBarColor:attrs.stackedBarColor,posBarColor:attrs.posBarColor,zeroBarColor:attrs.zeroBarColor,lineHeight:attrs.lineHeight,thresholdValue:attrs.thresholdValue,thresholdColor:attrs.thresholdColor,targetWidth:attrs.targetWidth,performanceColor:attrs.performanceColor,rangeColors:attrs.rangeColors,sliceColors:attrs.sliceColors,offset:attrs.offset,borderWidth:attrs.borderWidth,borderColor:attrs.borderColor,raw:attrs.raw,showOutliers:attrs.showOutliers,outlierIQR:attrs.outlierIQR,boxLineColor:attrs.boxLineColor,boxFillColor:attrs.boxFillColor,whiskerColor:attrs.whiskerColor,outlierLineColor:attrs.outlierLineColor,outlierFillColor:attrs.outlierFillColor,medianColor:attrs.medianColor,target:attrs.target,minValue:attrs.minValue,maxValue:attrs.maxValue,negBarColor:attrs.negBarColor,barWidth:attrs.barWidth,barSpacing:attrs.barSpacing,colorMap:attrs.colorMap,targetColor:attrs.targetColor,spotRadius:attrs.spotRadius});var $can=element.find(":first-child");attrs.opacity&&$can.css("opacity",attrs.opacity)}}}});