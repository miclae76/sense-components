/*global define,qvangular*/
define(["qlik"],function(qlik){"use strict";function loadVariables(delimitedVars){var app=qlik.currApp(),variables=delimitedVars.split(","),promises=[];return variables.forEach(function(variable){promises.push(loadVariable(app,variable))}),$q.all(promises)}function loadVariable(app,varName){var defer=$q.defer();return app.variable.getContent(varName.trim()).then(function(reply){var r={varName:varName,qContent:reply.qContent};defer.resolve(r)}).catch(function(err){defer.reject(err)}),defer.promise}var $injector=angular.injector(["ng"]),$q=$injector.get("$q");return{load:loadVariables}});